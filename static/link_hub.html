<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Link Hub â€” Open Multiple Links</title>
    <style>
      body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;max-width:900px;margin:24px;padding:0}
      h1{font-size:1.25rem}
      ul{margin:12px 0;padding-left:18px}
      button{margin-right:8px}
      .note{color:#555;font-size:.9rem}
    </style>
  </head>
  <body>
    <h1>Link Hub</h1>
    <p class="note">This page was opened to list multiple search links. Click <strong>Open all</strong> to open each link in a new tab (user-initiated click avoids popup blockers).</p>
    <div>
      <button id="openAll">Open all</button>
      <button id="openAllBackground">Open all (background)</button>
      <button id="copyList">Copy links</button>
    </div>
    <ul id="links"></ul>

    <script>
      function parseLinks() {
        try {
          const raw = decodeURIComponent(location.hash.slice(1) || '[]');
          const urls = JSON.parse(raw);
          if (!Array.isArray(urls)) return [];
          return urls;
        } catch (e) {
          console.error('Failed to parse links', e);
          return [];
        }
      }

      function render(urls) {
        const list = document.getElementById('links');
        list.innerHTML = '';
        for (const u of urls) {
          const li = document.createElement('li');
          const a = document.createElement('a');
          a.href = u;
          a.textContent = u;
          a.target = '_blank';
          a.rel = 'noopener';
          li.appendChild(a);
          list.appendChild(li);
        }
      }

      const urls = parseLinks();
      render(urls);

      document.getElementById('openAll').addEventListener('click', () => {
        for (const u of urls) window.open(u, '_blank');
      });
      document.getElementById('openAllBackground').addEventListener('click', () => {
        for (const u of urls) window.open(u, '_blank', 'noopener');
      });
      document.getElementById('copyList').addEventListener('click', async () => {
        try {
          await navigator.clipboard.writeText(urls.join('\n'));
          alert('Copied ' + urls.length + ' links to clipboard');
        } catch (e) {
          alert('Copy failed');
        }
      });
    </script>
  </body>
</html>
